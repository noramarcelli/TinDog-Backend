webpackJsonp([1],{"/i82":function(t,e){},0:function(t,e,s){t.exports=s("NHnr")},"06VP":function(t,e){},1:function(t,e){},"4ffV":function(t,e){},"6ckn":function(t,e){},"7zck":function(t,e){},Bevv:function(t,e){},G3BA:function(t,e){},GK12:function(t,e){},LUcA:function(t,e){},M8u4:function(t,e){},NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=s("/5sW"),i=(s("EuXz"),{computed:{showNav:function(){return"edit"!==this.$route.name},loggedInUser:function(){return this.$store.getters.loggedInUserForDisplay}}}),n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{class:[t.$route.name],attrs:{id:"app"}},[t.showNav?o("div",{attrs:{id:"nav"}},[o("router-link",{staticClass:"profile",attrs:{to:"/profile",name:"profile"}},[o("i",{staticClass:"fa fa-user"})]),o("router-link",{attrs:{to:"/swipe"}},[o("span",[o("img",{staticClass:"logo",attrs:{src:s("lVuh")}})])]),o("router-link",{staticClass:"msgs",attrs:{to:"/msgs",name:"messages"}},[o("i",{staticClass:"fa fa-comments"})])],1):t._e(),o("router-view"),o("footer")],1)},a=[],r=s("XyMi");function c(t){s("G3BA")}var l=!1,u=c,d=null,g=null,p=Object(r["a"])(i,n,a,l,u,d,g),m=p.exports,f=s("/ocq"),h={},v=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"home"},[s("p",[t._v("Swipe to your Love's Tail...")]),s("router-link",{attrs:{to:"/login"}},[t._v("Log In")]),t._v(" |\r\n  "),s("router-link",{attrs:{to:"/register"}},[t._v("Register")])],1)},C=[];function _(t){s("fp6i")}var D=!1,y=_,b="data-v-0aeb782d",I=null,w=Object(r["a"])(h,v,C,D,y,b,I),$=w.exports,E=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},k=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"about"},[s("h1",[t._v("This is a temp messages page")])])}],x=null,T=!1,B=null,M=null,N=null,U=Object(r["a"])(x,E,k,T,B,M,N),S=U.exports,G=s("fKPv"),A=s.n(G),F=s("mtWM"),O=s.n(F);const P="";function L(t){return O.a.post(`${P}/login`,t).then(t=>{return t.data.user}).catch(t=>{throw new Error("Login Failed")})}function H(t){return O.a.post(`${P}/register`,t).then(t=>console.log(t.data)).catch(t=>{throw new Error("Register Failed")})}function R(){return O.a.post(`${P}/logout`).then(t=>{}).catch(t=>{throw new Error("Logout Failed")})}function j(t){return console.log("userId inside getUserById in front service",t),O.a.get(`${P}/user/${t}`).then(t=>{return console.log("res in getUserById",t),t.data}).catch(t=>{throw new Error("Get User By Id Failed")})}var K={login:L,register:H,logout:R,getUserById:j};const z="/dog";function V(){return{name:"",imgs:[],age:0,description:"",gender:"",matchesIds:[],favs:[]}}function W(){var t=z;return O.a.get(t).then(t=>t.data).catch(t=>console.log("No Dogs",t))}function Y(t){return t._id?O.a.put(X(t._id),t):O.a.post(z,t)}function q(t){return O.a.delete(X(t))}function Z(t){return O.a.get(X(t)).then(t=>t.data)}function X(t){return`${z}/${t}`}function J(t,e){t=t||"";var s=`${z}/next?prevId=${t}&userDogId=${e}`;return O.a.get(s).then(t=>{return t.data[0]?t.data:"no dogs"})}function Q(t,e,s){return O.a.post(`${z}/like`,{likedId:t,userDogId:e,userId:s}).then(t=>t.data)}function tt(t){return O.a.get(`${z}/like/${t}`).then(t=>{return t.data})}function et(t){return O.a.post(`${z}/uploadImg`,{imgUrl:t}).then(t=>{return t.data})}var st,ot={getDogs:W,saveDog:Y,deleteDog:q,emptyDog:V,getDogById:Z,getNextDogs:J,addLikeToDog:Q,findLikes:tt,uploadImg:et},it="login",nt="loadUserDog",at={state:{loggedinUser:null,userDog:null},mutations:{setUser:function(t,e){var s=e.user;t.loggedinUser=s},setUserDog:function(t,e){var s=e.dog;t.userDog=s}},actions:(st={},A()(st,it,function(t,e){var s=e.userCredentials;return K.login(s).then(function(e){console.log("user in LOGIN",e),t.commit({type:"setUser",user:e}),t.dispatch({type:nt,dogId:e.dogId}),t.dispatch({type:"getDogMatches",dogId:e.dogId})})}),A()(st,nt,function(t,e){var s=e.dogId;return ot.getDogById(s).then(function(e){return t.commit({type:"setUserDog",dog:e}),console.log("dog in loadDog",e),e}).catch(function(t){return console.log(t)})}),A()(st,"logout",function(t){return K.logout().then(function(e){var s=null;t.commit({type:"setUser",user:s})}).catch(function(t){return console.log(t)})}),st),getters:{loggedInUserForDisplay:function(t){return t.loggedinUser},userDog:function(t){return t.userDog?t.userDog:{}},userDogId:function(t){return t.loggedinUser?t.loggedinUser.dogId:null}}},rt={name:"login-page",data:function(){return{user:{name:"Nora",password:"1234"}}},created:function(){},methods:{checkLogin:function(){var t=this;this.$store.dispatch({type:it,userCredentials:this.user}).then(function(e){console.log("You have been logged-in!");var s=t.$store.getters.loggedInUserForDisplay;console.log({user:s}),t.$socket.emit("userLoggedIn",s),t.$router.push("/swipe")}).catch(function(e){console.log("Login Failed!"),t.$refs.txtUserName.focus(),t.$router.push("/")})}},computed:{}},ct=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"login-page"},[s("form",{staticClass:"field",on:{submit:function(e){return e.preventDefault(),t.checkLogin(e)}}},[s("h1",[t._v("Please Login:")]),s("span",{staticClass:"control has-icons-left"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.user.name,expression:"user.name"}],ref:"txtUserName",staticClass:"input is-danger is-small is-rounded",attrs:{type:"text",placeholder:"User name",autofocus:""},domProps:{value:t.user.name},on:{input:function(e){e.target.composing||t.$set(t.user,"name",e.target.value)}}}),s("br"),s("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],staticClass:"input is-danger is-small is-rounded",attrs:{type:"password",placeholder:"Password"},domProps:{value:t.user.password},on:{input:function(e){e.target.composing||t.$set(t.user,"password",e.target.value)}}}),s("br"),s("button",{staticClass:"button is-danger is-rounded",attrs:{type:"submit",disabled:!this.user.name||!this.user.password}},[t._v("Login")])])])])},lt=[],ut=!1,dt=null,gt=null,pt=null,mt=Object(r["a"])(rt,ct,lt,ut,dt,gt,pt),ft=mt.exports,ht={name:"register-page",created:function(){},data:function(){return{user:{name:"",password:""}}},methods:{register:function(){var t=this;K.register(this.user).then(function(e){console.log("Register Completed, now try to log-in!"),t.$router.push("/login")}).catch(function(t){return console.log("Register Failed!")})}},computed:{}},vt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"register-page"},[s("h1",[t._v("Please Register:")]),s("form",{on:{submit:function(e){return e.preventDefault(),t.register(e)}}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.user.name,expression:"user.name"}],staticClass:"input is-danger is-small is-rounded",attrs:{type:"text",placeholder:"username",autofocus:""},domProps:{value:t.user.name},on:{input:function(e){e.target.composing||t.$set(t.user,"name",e.target.value)}}}),s("br"),s("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],staticClass:"input is-danger is-small is-rounded",attrs:{type:"password",placeholder:"password"},domProps:{value:t.user.password},on:{input:function(e){e.target.composing||t.$set(t.user,"password",e.target.value)}}}),s("br"),s("button",{staticClass:"button is-danger is-rounded",attrs:{type:"submit"}},[t._v("Register")])])])},Ct=[],_t=!1,Dt=null,yt=null,bt=null,It=Object(r["a"])(ht,vt,Ct,_t,Dt,yt,bt),wt=It.exports,$t=s("Biqn"),Et=s.n($t),kt={created:function(){if(this.dog){var t=this.dog._id;this.$store.dispatch({type:"getDogMatches",dogId:t})}},data:function(){return{filterBy:{name:""}}},computed:{dog:function(){return this.$store.state.userStore.userDog},matches:function(){return console.log("this.$store.state.matchStore.matches",this.$store.state.matchStore.matches),this.$store.state.matchStore.matches},loggedInUser:function(){return this.$store.getters.loggedInUserForDisplay},matchesCount:function(){return"Search "+this.matches.length+" Matches"}},methods:{setFilterAndSetMatches:function(){this.$store.dispatch({type:"setFilter",filterBy:Et()({},this.filterBy)}),this.$store.dispatch({type:"getDogMatches",dogId:this.dog._id})}}},xt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.dog?s("section",{staticClass:"msgs-page"},[s("form",{on:{submit:function(t){t.preventDefault()}}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.filterBy.name,expression:"filterBy.name"}],staticClass:"search input is-danger is-small is-rounded",attrs:{type:"search",placeholder:t.matchesCount,autofocus:""},domProps:{value:t.filterBy.name},on:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.setFilterAndSetMatches(e):null},input:function(e){e.target.composing||t.$set(t.filterBy,"name",e.target.value)}}}),s("br")]),s("div",{staticClass:"new-matches"},[s("label",[t._v("New Matches:")]),s("div",t._l(t.matches,function(e){return t.matches?s("span",{key:e._id,staticClass:"matches-imgs"},[e.dog?s("div",{staticClass:"matches-pics profile-pics",style:{backgroundImage:"url("+e.dog.imgs[0]+")"},on:{click:function(s){t.$router.push("msgs/"+e._id)}}}):t._e()]):t._e()}))]),s("div",{staticClass:"msgs title"},[s("label",[t._v("New Messages:")]),s("div",{staticClass:"msg-box"},t._l(t.matches,function(e){return t.matches?s("span",{key:e._id},[e.dog?s("div",{staticClass:"message",on:{click:function(s){t.$router.push("msgs/"+e._id)}}},[s("div",{staticClass:"sender-pic",style:{backgroundImage:"url("+e.dog.imgs[0]+")"}}),s("span",{staticClass:"txts"},[s("div",{staticClass:"sender"},[t._v(t._s(e.dog.name)+","+t._s(e.dog.age))]),e.messages[e.messages.length-1]?s("span",{staticClass:"msg-txt"},[t._v(t._s(e.messages[e.messages.length-1].txt))]):t._e()])]):t._e()]):t._e()}))])]):t._e()},Tt=[];function Bt(t){s("M8u4")}var Mt=!1,Nt=Bt,Ut=null,St=null,Gt=Object(r["a"])(kt,xt,Tt,Mt,Nt,Ut,St),At=Gt.exports,Ft={data:function(){return{matchId:null,newMessageTxt:""}},created:function(){this.$store.dispatch({type:"getDogMatches",dogId:this.user.dogId}),this.matchId=this.$route.params.matchId,this.$socket.emit("chatRequest",{username:"puki",roomName:this.matchId})},computed:{msgs:function(){return this.$store.getters.currMsgs(this.matchId)},user:function(){return this.$store.getters.loggedInUserForDisplay}},sockets:{newChatMember:function(t){console.log("there is a new member in our chat. username:",t)},newMsg:function(t){}},methods:{sendMsg:function(){console.log("inside sendMsg");var t={txt:this.newMessageTxt,from:this.user._id,at:Date.now(),isRead:!1};this.newMessageTxt="",this.$socket.emit("newMsg",t)}}},Ot=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"chat-page"},[s("a",{attrs:{title:"Done"},on:{click:function(e){t.$router.push("/msgs")}}},[s("i",{staticClass:"fa fa-arrow-alt-circle-left"})]),s("section",{staticClass:"chat-container"},[s("div",{staticClass:"chat"},t._l(t.msgs,function(e,o){return s("p",{key:o,staticClass:"msg-box",class:{"from-me":e.from===t.user._id}},[t._v(" "+t._s(e.txt))])})),s("form",{staticClass:"chat-input inline",on:{submit:function(e){return e.preventDefault(),t.sendMsg(e)}}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.newMessageTxt,expression:"newMessageTxt"}],staticClass:"input is-medium is-danger inline",attrs:{type:"text"},domProps:{value:t.newMessageTxt},on:{input:function(e){e.target.composing||(t.newMessageTxt=e.target.value)}}}),s("button",{staticClass:"button is-medium is-danger smiley",attrs:{title:"Smiley"}},[t._v("☺")]),t._m(0),s("button",{staticClass:"button is-medium is-danger send",attrs:{title:"Send"},on:{click:function(e){return e.preventDefault(),t.sendMsg(e)}}},[s("i",{staticClass:"fa fa-location-arrow"})])])])])},Pt=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("button",{staticClass:"button is-medium is-danger gift",attrs:{title:"Gift"}},[s("i",{staticClass:"fa fa-gift"})])}];function Lt(t){s("/i82")}var Ht=!1,Rt=Lt,jt="data-v-49543a86",Kt=null,zt=Object(r["a"])(Ft,Ot,Pt,Ht,Rt,jt,Kt),Vt=zt.exports,Wt={name:"profile",created:function(){var t=this;this.loggedInUser;if(null!==this.loggedInUser){var e=this.loggedInUser.dogId;this.$store.dispatch({type:"loadUserDog",dogId:e}).then(function(){console.log("this.$store.state.userDog",t.$store.state.userDog)})}},computed:{loggedInUser:function(){return this.$store.getters.loggedInUserForDisplay},dog:function(){return this.$store.state.userStore.userDog}}},Yt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",[s("div",{staticClass:"tinder"},[t.loggedInUser&&t.dog?s("div",[s("div",{staticClass:"profile-pics",style:{backgroundImage:"url("+t.dog.imgs[0]+")"}}),s("p",{staticClass:"profile-data"},[t._v(" "+t._s(t.dog.name)+" , "+t._s(t.dog.age))])]):t._e()]),s("div",{staticClass:"control"},[t.loggedInUser?s("span",[s("router-link",{staticClass:"profile-btns",attrs:{to:"/prefs",name:"PrefsPage",title:"Setting"}},[s("i",{staticClass:"fa fa-cogs"})]),t._v("  |\r\n      "),s("label",[t._v(" Settings")])],1):t._e(),t.loggedInUser?s("span",[s("router-link",{staticClass:"profile-btns",attrs:{to:"/edit",name:"EditPage",title:"Edit"}},[s("i",{staticClass:"fa fa-pencil"})]),s("label",[t._v(" Edit")])],1):t._e()])])},qt=[];function Zt(t){s("06VP")}var Xt=!1,Jt=Zt,Qt="data-v-66e8818c",te=null,ee=Object(r["a"])(Wt,Yt,qt,Xt,Jt,Qt,te),se=ee.exports,oe=s("rzQm"),ie=s.n(oe),ne={computed:{loggedInUser:function(){return this.$store.getters.loggedInUserForDisplay},dogToEdit:function(){var t=this.$store.getters.userDog,e=Et()({},t,{imgs:ie()(t.imgs)});return e}},methods:{saveImg:function(t){var e=this,s=this.dogToEdit.imgs[t];this.$store.dispatch({type:"uploadImg",imgUrl:s}).then(function(s){e.dogToEdit.imgs.splice(t,1,s.url)}),swal("Picture uploaded successfully!")},emptyImg:function(t){this.dogToEdit.imgs.splice(t,1,"")},saveDog:function(){var t=this.dogToEdit;this.$store.dispatch({type:"saveDog",dogToEdit:t}).then(function(){}),swal({title:"Profile Updated!",text:"All changes have been saved",icon:"success",button:"Ok"})}}},ae=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.loggedInUser?s("section",{staticClass:"edit-page"},[s("a",{staticClass:"done",attrs:{title:"Done"},on:{click:function(e){t.$router.push("/profile")}}},[s("i",{staticClass:"fa fa-check-circle"})]),s("section",{staticClass:"profile-imgs"},[s("div",{staticClass:"dogs-container"},t._l(6,function(e){return s("div",{staticClass:"dog",style:{backgroundImage:t.dogToEdit.imgs[e-1]?"url("+t.dogToEdit.imgs[e-1]+")":"url(./img/bgrd/paw.jpg)"}},[t.dogToEdit.imgs[e-1]?s("a",{on:{click:function(s){t.emptyImg(e-1)}}},[s("i",{staticClass:"fa fa-minus-circle"})]):s("a",[s("i",{staticClass:"fa fa-plus-circle",on:{click:function(s){t.saveImg(e-1)}}})]),t.dogToEdit.imgs[e-1]?t._e():s("input",{directives:[{name:"model",rawName:"v-model",value:t.dogToEdit.imgs[e-1],expression:"dogToEdit.imgs[idx - 1]"}],staticClass:"url-input",domProps:{value:t.dogToEdit.imgs[e-1]},on:{input:function(s){s.target.composing||t.$set(t.dogToEdit.imgs,e-1,s.target.value)}}})])}))]),s("section",{staticClass:"edit-details"},[s("div",{staticClass:"main-details"},[s("form",[s("label",{staticClass:"name"},[t._v("Name:")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.dogToEdit.name,expression:"dogToEdit.name"}],staticClass:"input is-small is-danger",attrs:{type:"text",placeholder:"NAME OF THE DOG"},domProps:{value:t.dogToEdit.name},on:{input:function(e){e.target.composing||t.$set(t.dogToEdit,"name",e.target.value)}}}),s("label",{staticClass:"breed"},[t._v("Breed:")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.dogToEdit.breed,expression:"dogToEdit.breed"}],staticClass:"input is-small is-danger",attrs:{type:"text",placeholder:"BREED"},domProps:{value:t.dogToEdit.breed},on:{input:function(e){e.target.composing||t.$set(t.dogToEdit,"breed",e.target.value)}}}),s("label",{staticClass:"age"},[t._v("Age:")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.dogToEdit.age,expression:"dogToEdit.age"}],staticClass:"input is-small is-danger",attrs:{type:"text",placeholder:"AGE"},domProps:{value:t.dogToEdit.age},on:{input:function(e){e.target.composing||t.$set(t.dogToEdit,"age",e.target.value)}}}),s("label",{staticClass:"weight"},[t._v("weight:")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.dogToEdit.weight,expression:"dogToEdit.weight"}],staticClass:"input is-small is-danger",attrs:{type:"text",placeholder:"WEIGHT"},domProps:{value:t.dogToEdit.weight},on:{input:function(e){e.target.composing||t.$set(t.dogToEdit,"weight",e.target.value)}}})])]),s("span",{staticClass:"selections"},[s("section",{staticClass:"specs select is-danger is-small"},[s("label",[t._v("Gender:")]),s("select",{directives:[{name:"model",rawName:"v-model",value:t.dogToEdit.gender,expression:"dogToEdit.gender"}],on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.dogToEdit,"gender",e.target.multiple?s:s[0])}}},[s("option",[t._v("Female")]),s("option",[t._v("Male")])])]),s("section",{staticClass:"select is-danger is-small"},[s("label",[t._v("City/Region:   ")]),s("select",{directives:[{name:"model",rawName:"v-model",value:t.dogToEdit.city,expression:"dogToEdit.city"}],on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.dogToEdit,"city",e.target.multiple?s:s[0])}}},[s("option",{staticClass:"optionGroup"},[t._v("HaMerkaz")]),s("option",{staticClass:"optionChild"},[t._v("Tel Aviv")]),s("option",{staticClass:"optionChild"},[t._v("Ramat Gan")]),s("option",{staticClass:"optionChild"},[t._v("Rishon Letzion")]),s("option",{staticClass:"optionChild"},[t._v("Bat Yam")]),s("option",{staticClass:"optionGroup"},[t._v("HaSharon")]),s("option",{staticClass:"optionChild"},[t._v("Natanya")]),s("option",{staticClass:"optionChild"},[t._v("Hertzeliya")]),s("option",{staticClass:"optionChild"},[t._v("Raanana")]),s("option",{staticClass:"optionChild"},[t._v("Kfar Saba")]),s("option",{staticClass:"optionGroup"},[t._v("HaDarom")]),s("option",{staticClass:"optionChild"},[t._v("Ashdod")]),s("option",{staticClass:"optionChild"},[t._v("Ashkelon")]),s("option",{staticClass:"optionChild"},[t._v("Beer Sheva")]),s("option",{staticClass:"optionGroup"},[t._v("HaTzafon")]),s("option",{staticClass:"optionChild"},[t._v("Haifa")]),s("option",{staticClass:"optionChild"},[t._v("Ako")]),s("option",{staticClass:"optionChild"},[t._v("Hadera")]),s("option",{staticClass:"optionChild"},[t._v("Nahariya")]),s("option",{staticClass:"optionChild"},[t._v("Krayot")])])])]),s("div",{staticClass:"desc"},[s("label",{staticClass:"desc about block"},[t._v("About:")]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.dogToEdit.description,expression:"dogToEdit.description"}],staticClass:"textarea is-small is-danger",attrs:{maxlength:"200",size:"200",type:"text",placeholder:"DEC DOG"},domProps:{value:t.dogToEdit.description},on:{input:function(e){e.target.composing||t.$set(t.dogToEdit,"description",e.target.value)}}}),s("button",{staticClass:"saveDog button is-small is-danger is-rounded block",attrs:{type:"button"},on:{click:t.saveDog}},[t._v("Save Dog")])])])]):t._e()},re=[];function ce(t){s("LUcA")}var le=!1,ue=ce,de="data-v-c02886be",ge=null,pe=Object(r["a"])(ne,ae,re,le,ue,de,ge),me=pe.exports,fe={data:function(){return{filterBy:{cities:[],weightGroups:[]}}},methods:{logout:function(){var t=this;console.log("Logging out!"),this.$store.dispatch("logout").then(function(){t.$router.push("/")})},setFilter:function(t){var e=ie()(this.filterBy.cities),s=ie()(this.filterBy.weightGroups),o={cities:e,weightGroups:s};this.$store.commit({type:"setSettingsFilter",filterBy:o})}}},he=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"prefs-page"},[s("a",{attrs:{title:"Done"},on:{click:function(e){t.$router.push("/profile")}}},[s("i",{staticClass:"fa fa-check-circle block done"})]),s("div",{staticClass:"settings"},[s("p",[t._v("Please select your interests:")]),s("div",{staticClass:"select is-danger is-small "},[s("label",{staticClass:"block"},[t._v("weight group  ")]),s("select",{directives:[{name:"model",rawName:"v-model",value:t.filterBy.weightGroups,expression:"filterBy.weightGroups"}],staticClass:"block",attrs:{multiple:""},on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.filterBy,"weightGroups",e.target.multiple?s:s[0])},t.setFilter]}},[s("option",[t._v("0-5KG")]),s("option",[t._v("6-15KG")]),s("option",[t._v("16-30KG")]),s("option",[t._v("31-45KG")]),s("option",[t._v("46KG & up")])])]),s("div",{staticClass:"select is-danger is-small "},[s("label",{staticClass:"block"},[t._v("City/Region   ")]),s("select",{directives:[{name:"model",rawName:"v-model",value:t.filterBy.cities,expression:"filterBy.cities"}],staticClass:"block",attrs:{multiple:""},on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){var e="_value"in t?t._value:t.value;return e});t.$set(t.filterBy,"cities",e.target.multiple?s:s[0])},t.setFilter]}},[s("option",{staticClass:"optionGroup"},[t._v("HaMerkaz")]),s("option",{staticClass:"optionChild"},[t._v("Tel Aviv")]),s("option",{staticClass:"optionChild"},[t._v("Ramat Gan")]),s("option",{staticClass:"optionChild"},[t._v("Rishon Letzion")]),s("option",{staticClass:"optionChild"},[t._v("Bat Yam")]),s("option",{staticClass:"optionGroup"},[t._v("HaSharon")]),s("option",{staticClass:"optionChild"},[t._v("Natanya")]),s("option",{staticClass:"optionChild"},[t._v("Hertzeliya")]),s("option",{staticClass:"optionChild"},[t._v("Raanana")]),s("option",{staticClass:"optionChild"},[t._v("Kfar Saba")]),s("option",{staticClass:"optionGroup"},[t._v("HaDarom")]),s("option",{staticClass:"optionChild"},[t._v("Ashdod")]),s("option",{staticClass:"optionChild"},[t._v("Ashkelon")]),s("option",{staticClass:"optionChild"},[t._v("Beer Sheva")]),s("option",{staticClass:"optionGroup"},[t._v("HaTzafon")]),s("option",{staticClass:"optionChild"},[t._v("Haifa")]),s("option",{staticClass:"optionChild"},[t._v("Ako")]),s("option",{staticClass:"optionChild"},[t._v("Hadera")]),s("option",{staticClass:"optionChild"},[t._v("Nahariya")]),s("option",{staticClass:"optionChild"},[t._v("Krayot")])]),s("br")])]),s("div",{staticClass:"contact"},[s("label",[t._v("Contact Us:")]),s("button",{staticClass:"button is-danger is-small is-rounded"},[t._v("Help & support")]),s("button",{staticClass:"button is-danger is-small is-rounded",on:{click:t.logout}},[t._v("Logout")])])])},ve=[];function Ce(t){s("Bevv")}var _e=!1,De=Ce,ye="data-v-792e9771",be=null,Ie=Object(r["a"])(fe,he,ve,_e,De,ye,be),we=Ie.exports,$e={computed:{userDog:function(){return this.$store.getters.userDog},currMatch:function(){return this.$store.state.matchStore.realTimeMatch},matchedDog:function(){return this.$store.state.matchStore.matchedDog},loggedInUser:function(){return this.$store.getters.loggedInUserForDisplay}},created:function(){}},Ee=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.loggedInUser?s("section",{staticClass:"match-page"},[s("h1",[t._v("It's a match!!!")]),t.matchedDog?s("div",{staticClass:"match-container"},[s("div",{staticClass:"profile-pics",style:{backgroundImage:"url("+t.userDog.imgs[0]+")"}}),s("div",{staticClass:"profile-pics",style:{backgroundImage:"url("+t.matchedDog.imgs[0]+")"}})]):t._e(),t.matchedDog?s("p",[t._v("You and "+t._s(t.matchedDog.name)+" have liked each other")]):t._e(),t.currMatch?s("button",{staticClass:"button is-danger is-rounded",on:{click:function(e){t.$router.push("/msgs/"+t.currMatch._id)}}},[t._v("Send a Message")]):t._e(),s("br"),s("button",{staticClass:"button is-danger is-rounded",on:{click:function(e){t.$router.push("./swipe")}}},[t._v("Keep Playing")])]):t._e()},ke=[];function xe(t){s("6ckn")}var Te=!1,Be=xe,Me=null,Ne=null,Ue=Object(r["a"])($e,Ee,ke,Te,Be,Me,Ne),Se=Ue.exports,Ge={props:["dog"],computed:{userDescription:function(){return this.$store.getters.userDescription}}},Ae=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"details"},[s("p",[t._v(t._s(t.dog.description))]),s("p",[t._v("Breed: "+t._s(t.dog.breed))]),s("p",[t._v("Age: "+t._s(t.dog.age))]),s("p",[t._v("Weight: "+t._s(t.dog.weight))]),s("p",[t._v("City: "+t._s(t.dog.city))])])},Fe=[];function Oe(t){s("WBbR")}var Pe=!1,Le=Oe,He="data-v-167e795a",Re=null,je=Object(r["a"])(Ge,Ae,Fe,Pe,Le,He,Re),Ke=je.exports,ze=s("/kJX"),Ve=s.n(ze),We={props:["dog"],components:{Carousel:ze["Carousel"],Slide:ze["Slide"]}},Ye=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.dog?s("carousel",{attrs:{perPageCustom:[[480,1],[768,1],[300,1],[0,1]],navigationEnabled:!0}},t._l(t.dog.imgs,function(e,o){return s("slide",{key:o,staticClass:"carousel-item",style:{backgroundImage:"url("+t.dog.imgs[o]+")"}})})):t._e()},qe=[];function Ze(t){s("4ffV")}var Xe,Je=!1,Qe=Ze,ts=null,es=null,ss=Object(r["a"])(We,Ye,qe,Je,Qe,ts,es),os=ss.exports,is=(s("y9m4"),"saveLike"),ns="loadNextDogs",as={state:{selectedDog:null,selectedDogIdx:0,filterBy:{},dogs:[]},getters:{currentDog:function(t){var e=t.dogs,s=t.selectedDogIdx;return e[s]}},mutations:{setDogs:function(t,e){var s=e.dogs;t.selectedDogIdx=0,t.dogs=s},moveCurrentDog:function(t){t.selectedDogIdx++},setSelectedDog:function(t,e){var s=e.dogs;t.selectedDogIdx=null===s?0:t.selectedDogIdx++,t.selectedDog=s[t.selectedDogIdx]},setSettingsFilter:function(t,e){var s=e.filterBy;t.filterBy.cities=s.cities,t.filterBy.weightGroups=s.weightGroups,console.log(" state.filterBy ",t.filterBy)}},actions:(Xe={moveCurrentDog:function(t){var e=t.state,s=t.getters,o=t.commit;return 0===e.dogs.length?ot.getNextDogs(void 0,s.userDogId).then(function(t){o({type:"setDogs",dogs:t})}):e.selectedDogIdx===e.dogs.length-1?ot.getNextDogs(s.currentDog._id,s.userDogId).then(function(t){if("no dogs"===t)return ot.getNextDogs(void 0,s.userDogId).then(function(t){o({type:"setDogs",dogs:t})});o({type:"setDogs",dogs:t})}):(o("moveCurrentDog"),Promise.resolve())}},A()(Xe,ns,function(t,e){var s=e.dogId,o=e.userDogId;return ot.getNextDogs(s,o,t.state.filterBy).then(function(e){t.commit({type:"setSelectedDog",dogs:e})})}),A()(Xe,is,function(t,e){var s=e.dogId,o=e.userDogId,i=e.userId;return ot.addLikeToDog(s,o,i).then(function(t){})}),A()(Xe,"findLikes",function(t,e){var s=e.userDogId;return ot.findLikes(s).then(function(t){})}),A()(Xe,"uploadImg",function(t,e){var s=e.imgUrl;return ot.uploadImg(s).then(function(t){return t})}),A()(Xe,"saveDog",function(t,e){var s=e.dogToEdit;return ot.saveDog(s).then(function(t){return t})}),Xe)},rs=A()({name:"dog-preview",components:{DogDetails:Ke,DogCarousel:os},data:function(){return{shouldShow:!1,swipeDirection:"None"}},created:function(){this.loggedInUser;null!==this.loggedInUser&&this.$store.dispatch({type:"moveCurrentDog"})},computed:{loggedInUser:function(){return this.$store.getters.loggedInUserForDisplay},currDog:function(){return console.log("this.$store.getters.currentDog",this.$store.getters.currentDog),this.$store.getters.currentDog},userDog:function(){return this.$store.state.userStore.userDog},touch:function(){return{x:this.x,y:this.y,methods:!0}}},methods:{getNextDogs:function(t,e){var s=this.$store.getters.userDogId;if(this.$store.dispatch({type:"moveCurrentDog"}),e){var o=this.loggedInUser._id;this.$socket.emit("likedDog",{dogId:t,dogUserId:e,userDogId:s,userId:o})}},showDetails:function(){this.shouldShow=!this.shouldShow},swipe:function(t){console.log("got swipe direction",t),this.swipeDirection=t,"left"===t?this.getNextDogs(this.currDog._id):this.getNextDogs(this.currDog._id,this.currDog.userId)}},sockets:{matched:function(){this.$router.push("/match")}}},"components",{DogDetails:Ke,DogCarousel:os}),cs=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{ref:"tinder",staticClass:"tinder"},[s("div",{ref:"tinder--status",staticClass:"tinder--status"},[s("i",{ref:"nope",staticClass:"fa fa-remove"}),s("i",{ref:"heart",staticClass:"fa fa-heart"})]),s("div",{ref:"tinderCards",staticClass:"tinder--cards"},[t.currDog?s("div",{ref:"tinderCard",staticClass:"tinder--card"},[s("v-layout",{directives:[{name:"touch",rawName:"v-touch",value:{left:function(){return t.swipe("left")},right:function(){return t.swipe("right")}},expression:"{\n          left: () => swipe('left'),\n          right: () => swipe('right')\n        }"}],attrs:{column:"","align-center":"","justify-center":""}},[s("v-subheader"),s("dog-carousel",{attrs:{dog:t.currDog}})],1),s("section",{staticClass:"details"},[s("span",{on:{click:t.showDetails}},[s("i",{staticClass:"fa card-control",class:{"fa fa-info":!t.shouldShow,"fa fa-arrow-down":t.shouldShow}})]),s("p",{staticClass:"dog"},[t._v(" "+t._s(t.currDog.name)+", "+t._s(t.currDog.age)+" ")]),t.shouldShow?s("dog-details",{staticClass:"dog-info",attrs:{dog:t.currDog}}):t._e()],1)],1):t._e()]),s("div",{ref:"tinderButtons",staticClass:"tinder--buttons"},[s("button",{attrs:{id:"nope"},on:{click:function(e){t.getNextDogs(t.currDog._id)}}},[s("i",{staticClass:"fa fa-remove"})]),t._m(0),s("button",{attrs:{id:"love"},on:{click:function(e){t.getNextDogs(t.currDog._id,t.currDog.userId)}}},[s("i",{staticClass:"fa fa-heart"})])])])},ls=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("button",{attrs:{id:"fav"}},[s("i",{staticClass:"fa fa-star"})])}];function us(t){s("e1k+")}var ds=!1,gs=us,ps="data-v-083b67fd",ms=null,fs=Object(r["a"])(rs,cs,ls,ds,gs,ps,ms),hs=fs.exports;o["a"].use(f["a"]);var vs=new f["a"]({routes:[{path:"/",name:"home",component:$},{path:"/about",name:"about",component:S},{path:"/login",name:"login",component:ft},{path:"/register",name:"register",component:wt},{path:"/edit",name:"edit",component:me},{path:"/prefs",name:"prefs",component:we},{path:"/msgs",name:"msgs",component:At},{path:"/msgs/:matchId",name:"chat",component:Vt},{path:"/profile",name:"profile",component:se},{path:"/match",name:"match",component:Se},{path:"/swipe",name:"dogpreview",component:hs}]}),Cs=s("NYxO");s("gbyG"),s("Gh7F"),s("fx22"),s("WpTh");const _s="/match";function Ds(t){return O.a.get(`${_s}/${t}`,{userDogId:t}).then(t=>t.data)}var ys={getDogMatches:Ds},bs={state:{realTimeMatch:null,matchedDog:null,matches:[],filterBy:{}},mutations:{SOCKET_MATCHED:function(t,e){t.realTimeMatch=e,console.log("state.realTimeMatch",t.realTimeMatch)},SOCKET_NEWMSG:function(t,e){var s=t.matches;Array.isArray(e)&&(e=e[0]);var o=e,i=o.msg,n=o.matchId;console.log("inside SOCKET_NEWMSG");var a=s.find(function(t){return t._id===n});a.messages.push(i)},setMatchedDog:function(t,e){var s=e.dog;t.matchedDog=s},setDogMatches:function(t,e){var s=e.filteredMatches;t.matches=s,console.log("state.matches",t.matches)},setFilterBy:function(t,e){var s=e.filterBy;t.filterBy=s,console.log("filterBy inside matchState mutation",s)}},actions:{socket_matched:function(t,e){var s=t.getters.userDog._id,o=e.firstDogId===s?e.secondDogId:e.firstDogId;return ot.getDogById(o).then(function(e){t.commit({type:"setMatchedDog",dog:e})})},getDogMatches:function(t,e){var s=e.dogId;console.log("userDogId in getDogMatches",s),ys.getDogMatches(s).then(function(e){console.log("matches",e);var o=e.map(function(t){var e=t.firstDogId===s?t.secondDogId:t.firstDogId;return console.log("otherDogId",e),ot.getDogById(e).then(function(e){return console.log("dog",e),t.dog=e,t})});return Promise.all(o).then(function(e){var s=[];console.log("store.state.filterBy inside getDogMatches",t.state.filterBy),t.state.filterBy&&t.state.filterBy.name?e.forEach(function(e){e.dog.name.toLowerCase().includes(t.state.filterBy.name.toLowerCase())&&s.push(e)}):s=ie()(e),console.log("filteredMatches",s),t.commit({type:"setDogMatches",filteredMatches:s})})})},setFilter:function(t,e){var s=e.filterBy;t.commit({type:"setFilterBy",filterBy:s})}},getters:{currMsgs:function(t){return function(e){var s=t.matches.find(function(t){return e===t._id});return console.log({currMatch:s,matchId:e}),s?s.messages:[]}}}};o["a"].use(Cs["a"]);var Is=new Cs["a"].Store({strict:!0,state:{},mutations:{SOCKET_CONNECT:function(){},SOCKET_CHENAVIV:function(){}},actions:{socket_chenAviv:function(){}},modules:{userStore:at,dogStore:as,matchStore:bs}}),ws=(s("ZA4m"),s("ydGU"));Object(ws["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},cached:function(){console.log("Content has been cached for offline use.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}});s("DmT9");var $s=s("hMcO"),Es=s.n($s),ks=s("3EgV"),xs=s.n(ks),Ts=(s("thjQ"),s("f1Fh")),Bs=s.n(Ts),Ms=(s("7zck"),s("RYnZ"),s("GK12"),"");o["a"].use(xs.a),o["a"].use(Es.a,Ms+"/",Is),o["a"].use(Bs.a),o["a"].use(Ve.a),o["a"].config.productionTip=!1,new o["a"]({router:vs,store:Is,render:function(t){return t(m)}}).$mount("#app")},RYnZ:function(t,e){},WBbR:function(t,e){},ZA4m:function(t,e){},"e1k+":function(t,e){},fp6i:function(t,e){},lVuh:function(t,e,s){t.exports=s.p+"img/logo.8974450d.png"}},[0]);
//# sourceMappingURL=app.9b6cf148.js.map